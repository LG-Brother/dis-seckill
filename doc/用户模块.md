# 用户模块接口

## 首页

- 请求地址：/user/index
- 请求方式：get
- 返回响应：login.html

## 登录接口

- 请求地址：/user/login
- 请求方式：post
- 请求参数：

| 请求字段 | 字段含义   | 是否必填 |
| -------- | ---------- | -------- |
| mobile   | 用户手机号 | 必填     |
| password | 密码       | 必填     |

# 商品模块接口

## 商品列表接口

- 请求地址：/goods/goodsList
- 请求方式：get
- 返回响应：goods_list.htm

**工作过程**

1. 客户端发出获取商品列表信息的异步请求；
1. 服务端从缓存中获取商品列表`goods_list.htm`，如果存在，则直接返回给客户端，如果不存在，则进入3；
1. 服务端从商品模块中查询商品列表信息，然后使用`ThymeleafViewResolver`渲染引擎手动渲染商品列表页面，将渲染后的页面数据存储在缓存中，并返回商品列表页面给客户端。

**好处**

上述工作过程对`/goods/goodsList`接口实现了页面级缓存；从redis中取页面，如果没有则需要手动渲染页面，并且将渲染的页面存储在redis中供下一次访问时获取。通过引入缓存，避免每次从数据库中取数据后使用模板渲染html文件，从而省去服务器程序的渲染html文件的不必要工作和的减轻数据库访问压力。

## 商品详情接口

- 请求地址：/goods/getDetails/{goodsId}

- 请求方式：get

- 请求参数：

  | 请求字段 | 字段含义 | 是否必填 |
  | -------- | -------- | -------- |
  | goodsId  | 商品id   | 必填     |

- 返回响应:

  ```json
  {
      "code": 0,
      "msg": "success",
      "data": {
          "seckillStatus": 1,
          "remainSeconds": 0,
          "goods": {
              "id": 1,
              "goodsName": "iphoneX",
              "goodsTitle": "Apple iPhone X (A1865) 64GB 银色 移动联通电信4G手机",
              "goodsImg": "/img/iphonex.png",
              "goodsDetail": "Apple iPhone X (A1865) 64GB 银色 移动联通电信4G手机",
              "goodsPrice": 8765,
              "goodsStock": 10000,
              "seckillPrice": 0.01,
              "stockCount": 9,
              "startDate": "2017-12-04T13:51:23.000+0000",
              "endDate": "2019-12-31T13:51:27.000+0000"
          },
          "user": {
              "uuid": 2,
              "phone": 18342390420,
              "nickname": "Noodle",
              "password": "5e7b3a9754c2777f96174d4ccb980d23",
              "salt": "1a2b3c4d",
              "head": null,
              "registerDate": null,
              "lastLoginDate": null,
              "loginCount": 0
          }
      }
  }
  ```

**工作过程**

1. 客户端发出获取商品详情信息的请求；
1. 服务端通过商品id从商品模块中读取商品详细信息，计算秒杀状态，将秒杀状态和剩余时间以及商品详细信息一并返回给客户端。

# 秒杀模块接口

## 获取验证码接口

- 接口地址：/seckill/verifyCode?goodsId={}

- 请求方式：get

- 请求参数：

  | 请求字段 | 字段含义 | 是否必填 |
  | -------- | -------- | -------- |
  | goodsId  | 商品id   | 必填     |

- 返回响应：

  